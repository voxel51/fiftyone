.. default-role:: code

API Connection and Keys
========================

.. _configuring-api-connection:

Configuring an API connection
-----------------------------

By default, FiftyOne uses a connection to a MongoDB database to work. You can
alternatively configure FiftyOne to connect to a Teams API instance. This
allows for user roles and dataset permissions to be respected. To do this, the
following configuration options are required. See
:ref:`Configuring FiftyOne <configuring-fiftyone>` for more about the FiftyOne
`config` object.

+-------------------------------+-------------------------------------+-------------------------------+----------------------------------------------------------------------------------------+
| Config field                  | Environment variable                | Default value                 | Description                                                                            |
+===============================+=====================================+===============================+========================================================================================+
| `api_uri`                     | `FIFTYONE_API_URI`                  | `None`                        | The URI where the FiftyOne Teams API (`teams-api` container) is exposed. Check         |
|                               |                                     |                               | with your Teams admin for the value of this field for your deployment.                 |
+-------------------------------+-------------------------------------+-------------------------------+----------------------------------------------------------------------------------------+
| `api_key`                     | `FIFTYONE_API_KEY`                  | `None`                        | The FiftyOne Teams API key to use for authentication with the API. This key is         |
|                               |                                     |                               | unique to each user. See below for information on generating an API key.               |
+-------------------------------+-------------------------------------+-------------------------------+----------------------------------------------------------------------------------------+

.. _generating-api-key:

Generating an API key
---------------------

Members can generate an API key in order to utilize the SDK and API without
logging in to the UI.

.. caution::
    This key is representative of the user and has the same
    role and permissions. Secure it as you would a password!

Collaborator users and above can access key management features by clicking on their
account icon in the upper-right of the FiftyOne Teams App and navigating to the
"Settings > API keys" page.

.. note::

    Guest users cannot create and use API keys.

A new key can be generated by clicking on "Generate API key" and optionally
providing a nickname for the key to identify what it is used for. Click "Generate key"
to complete the process.

.. image:: /images/teams/api_key_generate.png
   :alt: api-key-generate
   :align: center

This will generate and display a new key.

.. warning::

    Keys are only shown once! Copy the key immediately, as it will not be accessible again.

.. image:: /images/teams/api_key_generated.png
   :alt: api-key-generated
   :align: center

Copy the key and paste it in your :ref:`FiftyOne config file <configuring-api-connection>`
or `FIFTYONE_API_KEY` environment variable.

Deleting a Key
---------------

To delete a key and remove its access, find the key to delete in the list and click "Delete".

.. image:: /images/teams/api_key_delete.png
   :alt: api-key-delete
   :align: center
